/** 
 * Sogou JavaScript Library 
 * 2014-10-02 build 
 */
define("Sogou.DS.Map",["Sogou.Util","Sogou.Iter.Iterator","Sogou.Iter.StopIteration","Sogou.Object"],function(a,b,c,d){"use strict";var e=function(a){this.map_={},this.keys_=[];var b=arguments.length;if(b>1){if(b%2)throw Error("Uneven number of arguments");for(var c=0;b>c;c+=2)this.set(arguments[c],arguments[c+1])}else a&&this.addAll(a)};return e.prototype.count_=0,e.prototype.version_=0,e.prototype.getCount=function(){return this.count_},e.prototype.getValues=function(){this.cleanupKeysArray_();for(var a=[],b=0;b<this.keys_.length;b++){var c=this.keys_[b];a.push(this.map_[c])}return a},e.prototype.getKeys=function(){return this.cleanupKeysArray_(),this.keys_.concat()},e.prototype.containsKey=function(a){return e.hasKey_(this.map_,a)},e.prototype.containsValue=function(a){for(var b=0;b<this.keys_.length;b++){var c=this.keys_[b];if(e.hasKey_(this.map_,c)&&this.map_[c]==a)return!0}return!1},e.prototype.equals=function(a,b){if(this===a)return!0;if(this.count_!=a.getCount())return!1;var c=b||e.defaultEquals;this.cleanupKeysArray_();for(var d,f=0;d=this.keys_[f];f++)if(!c(this.get(d),a.get(d)))return!1;return!0},e.defaultEquals=function(a,b){return a===b},e.prototype.isEmpty=function(){return 0==this.count_},e.prototype.clear=function(){this.map_={},this.keys_.length=0,this.count_=0,this.version_=0},e.prototype.remove=function(a){return e.hasKey_(this.map_,a)?(delete this.map_[a],this.count_--,this.version_++,this.keys_.length>2*this.count_&&this.cleanupKeysArray_(),!0):!1},e.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){for(var a=0,b=0;a<this.keys_.length;){var c=this.keys_[a];e.hasKey_(this.map_,c)&&(this.keys_[b++]=c),a++}this.keys_.length=b}if(this.count_!=this.keys_.length){for(var d={},a=0,b=0;a<this.keys_.length;){var c=this.keys_[a];e.hasKey_(d,c)||(this.keys_[b++]=c,d[c]=1),a++}this.keys_.length=b}},e.prototype.get=function(a,b){return e.hasKey_(this.map_,a)?this.map_[a]:b},e.prototype.set=function(a,b){e.hasKey_(this.map_,a)||(this.count_++,this.keys_.push(a),this.version_++),this.map_[a]=b},e.prototype.addAll=function(a){var b,c;a instanceof e?(b=a.getKeys(),c=a.getValues()):(b=d.getKeys(a),c=d.getValues(a));for(var f=0;f<b.length;f++)this.set(b[f],c[f])},e.prototype.clone=function(){return new e(this)},e.prototype.transpose=function(){for(var a=new e,b=0;b<this.keys_.length;b++){var c=this.keys_[b],d=this.map_[c];a.set(d,c)}return a},e.prototype.toObject=function(){this.cleanupKeysArray_();for(var a={},b=0;b<this.keys_.length;b++){var c=this.keys_[b];a[c]=this.map_[c]}return a},e.prototype.getKeyIterator=function(){return this.__iterator__(!0)},e.prototype.getValueIterator=function(){return this.__iterator__(!1)},e.prototype.__iterator__=function(a){this.cleanupKeysArray_();var b=0,c=this.keys_,d=this.map_,e=this.version_,f=this,g=new goog.iter.Iterator;return g.next=function(){for(;;){if(e!=f.version_)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw goog.iter.StopIteration;var g=c[b++];return a?g:d[g]}},g},e.hasKey_=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},e});